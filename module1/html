<!DOCTYPE html>
<html>
<head>
    <title>Module 1 – Vocabulary Basics</title>
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>

<body onload="loadStudentName()">

<div class="container">

    <h1>Module 1: Vocabulary Basics</h1>
    <h3>Welcome, <span id="welcomeUser"></span>!</h3>

    <p style="text-align:center;">Learn new words using Flashcards → Matching Game → Quiz</p>

    <!-- FLASHCARDS -->
    <h2>Flashcards</h2>

    <div id="flashcard" class="flashcard" onclick="flipFlashcard()">
        Click to Start Flashcards
    </div>

    <button class="btn" onclick="nextFlashcard()">Next Word</button>


    <!-- MATCHING GAME -->
    <h2>Matching Game</h2>
    <p>Match the word with its meaning.</p>

    <div id="matchGame" class="match-grid"></div>


    <!-- QUIZ -->
    <h2>Quick Quiz</h2>

    <div id="quizBox"></div>
    <button class="btn" onclick="submitQuiz()">Submit Quiz</button>

    <p id="quizResult" style="font-weight:bold; text-align:center; margin-top:10px;"></p>

    <br><br>

    <button class="btn" onclick="finishModule()">Finish Module</button>

</div>


<script>
// ----------------------------
// FLASHCARDS
// ----------------------------

let flashcards = [
    { word: "Brilliant", meaning: "Very smart or talented" },
    { word: "Journey", meaning: "A trip from one place to another" },
    { word: "Whisper", meaning: "To speak very softly" },
    { word: "Rescue", meaning: "To save someone" },
    { word: "Gather", meaning: "To collect things together" }
];

let cardIndex = 0;
let showingMeaning = false;

function flipFlashcard() {
    const card = document.getElementById("flashcard");

    if (!showingMeaning) {
        card.textContent = flashcards[cardIndex].meaning;
        showingMeaning = true;
    } else {
        card.textContent = flashcards[cardIndex].word;
        showingMeaning = false;
    }
}

function nextFlashcard() {
    cardIndex++;
    if (cardIndex >= flashcards.length) cardIndex = 0;

    showingMeaning = false;
    document.getElementById("flashcard").textContent = flashcards[cardIndex].word;
}



// ----------------------------
// MATCHING GAME
// ----------------------------

let matchWords = flashcards.map(f => f.word);
let matchMeanings = flashcards.map(f => f.meaning);

matchMeanings.sort(() => Math.random() - 0.5);

let selectedWord = "";
let selectedMeaning = "";

function loadMatchingGame() {
    const game = document.getElementById("matchGame");
    game.innerHTML = "";

    matchWords.forEach(w => {
        let div = document.createElement("div");
        div.className = "match-item";
        div.textContent = w;
        div.onclick = () => selectWord(w, div);
        game.appendChild(div);
    });

    matchMeanings.forEach(m => {
        let div = document.createElement("div");
        div.className = "match-item";
        div.textContent = m;
        div.onclick = () => selectMeaning(m, div);
        game.appendChild(div);
    });
}

function selectWord(w, element) {
    selectedWord = w;
    highlight(element);
}

function selectMeaning(m, element) {
    selectedMeaning = m;
    highlight(element);

    checkMatch();
}

function highlight(element) {
    element.style.background = "#d0e5ff";
}

function checkMatch() {
    if (!selectedWord || !selectedMeaning) return;

    let pair = flashcards.find(f => f.word === selectedWord);

    if (pair.meaning === selectedMeaning) {
        alert("Correct Match!");
    } else {
        alert("Wrong Match, try again.");
    }

    selectedWord = "";
    selectedMeaning = "";
}



// ----------------------------
// QUIZ
// ----------------------------

let quizData = [
    {
        q: "What does 'Brilliant' mean?",
        options: ["Very smart", "Very angry", "Very slow"],
        answer: "Very smart"
    },
    {
        q: "A journey is:",
        options: ["A long sleep", "A trip", "A type of food"],
        answer: "A trip"
    },
    {
        q: "To whisper means:",
        options: ["To shout", "To speak softly", "To run fast"],
        answer: "To speak softly"
    },
    {
        q: "Rescue means:",
        options: ["Save someone", "Watch someone", "Follow someone"],
        answer: "Save someone"
    },
    {
        q: "Gather means:",
        options: ["Destroy things", "Collect things", "Forget things"],
        answer: "Collect things"
    }
];

function loadQuiz() {
    let quizBox = document.getElementById("quizBox");

    quizData.forEach((q, index) => {
        let block = `
            <p><b>${index + 1}. ${q.q}</b></p>
            ${q.options
                .map(
                    opt =>
                    `<label><input type="radio" name="q${index}" value="${opt}"> ${opt}</label><br>`
                )
                .join("")}
            <br>
        `;
        quizBox.innerHTML += block;
    });
}

function submitQuiz() {
    let score = 0;

    quizData.forEach((q, index) => {
        let selected = document.querySelector(`input[name="q${index}"]:checked`);
        if (selected && selected.value === q.answer) score++;
    });

    document.getElementById("quizResult").textContent =
        "Your Score: " + score + "/5";

    // Save score for leaderboard
    saveScore("module1", score);

    if (score === 5) {
        awardBadge("flashmaster");
    }
}



// ----------------------------
// FINISH MODULE
// ----------------------------

function finishModule() {
    alert("Module 1 Complete!");
    window.location.href = "index.html";
}



// ----------------------------
// LOAD EVERYTHING
// ----------------------------

loadMatchingGame();
loadQuiz();

</script>

</body>
</html>
